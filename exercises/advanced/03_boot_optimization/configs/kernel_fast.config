#
# kernel_fast_defconfig - Fast boot kernel configuration for BBB
#
# This is NOT a complete kernel config. Use this as a reference for
# options to modify in your existing am335x_evm_defconfig.
#
# Apply these changes to optimize boot time:
#   make am335x_evm_defconfig
#   scripts/kconfig/merge_config.sh .config kernel_fast.config
#   make olddefconfig
#
# Author: Embedded Linux Labs
# License: MIT

# =============================================================================
# SIZE OPTIMIZATION
# =============================================================================

# Optimize for size
CONFIG_CC_OPTIMIZE_FOR_SIZE=y

# Compression options (LZO is fastest to decompress)
CONFIG_KERNEL_LZO=y
# CONFIG_KERNEL_GZIP is not set
# CONFIG_KERNEL_LZMA is not set
# CONFIG_KERNEL_XZ is not set

# =============================================================================
# DISABLE DEBUG FEATURES
# =============================================================================

# CONFIG_DEBUG_INFO is not set
# CONFIG_DEBUG_KERNEL is not set
# CONFIG_DEBUG_FS is not set
# CONFIG_PRINTK_TIME is not set
# CONFIG_DYNAMIC_DEBUG is not set
# CONFIG_MAGIC_SYSRQ is not set
# CONFIG_DETECT_HUNG_TASK is not set
# CONFIG_SCHEDSTATS is not set
# CONFIG_SCHED_DEBUG is not set

# Disable kernel self-test
# CONFIG_KUNIT is not set
# CONFIG_KCOV is not set
# CONFIG_KASAN is not set
# CONFIG_UBSAN is not set

# =============================================================================
# REMOVE UNUSED FEATURES
# =============================================================================

# Disable if not using USB peripherals
# CONFIG_USB_SUPPORT is not set

# Disable if not using audio
# CONFIG_SOUND is not set

# Disable if not using WiFi
# CONFIG_WLAN is not set
# CONFIG_CFG80211 is not set

# Disable if not using Bluetooth
# CONFIG_BT is not set

# Disable if not using input devices (keyboard, mouse)
# CONFIG_INPUT_EVDEV is not set
# CONFIG_INPUT_KEYBOARD is not set
# CONFIG_INPUT_MOUSE is not set

# Disable if not using framebuffer/display
# CONFIG_FB is not set
# CONFIG_DRM is not set

# Disable if not using wireless
# CONFIG_WIRELESS is not set

# Networking - disable unused protocols
# CONFIG_IPV6 is not set
# CONFIG_NETFILTER is not set
# CONFIG_BRIDGE is not set
# CONFIG_VLAN_8021Q is not set

# Disable unused filesystems
# CONFIG_EXT2_FS is not set
# CONFIG_EXT3_FS is not set
# CONFIG_BTRFS_FS is not set
# CONFIG_XFS_FS is not set
# CONFIG_NTFS_FS is not set
# CONFIG_VFAT_FS is not set
# CONFIG_CIFS is not set
# CONFIG_NFS_FS is not set

# =============================================================================
# BOOT OPTIMIZATIONS
# =============================================================================

# Enable CONFIG_PRINTK but control at runtime with quiet
CONFIG_PRINTK=y

# Fast console (reduce VT switching overhead)
# CONFIG_VT is not set
# CONFIG_CONSOLE_TRANSLATIONS is not set

# Reduce module overhead
# CONFIG_MODULE_SIG is not set
# CONFIG_MODULE_SIG_ALL is not set
# CONFIG_MODULE_COMPRESS is not set

# =============================================================================
# ADVANCED OPTIMIZATIONS
# =============================================================================

# Deferred initcalls (kernel 5.x+)
# CONFIG_DEFERRED_INITCALLS=y

# Preemption (NONE is fastest boot, but worst latency)
CONFIG_PREEMPT_NONE=y
# CONFIG_PREEMPT_VOLUNTARY is not set
# CONFIG_PREEMPT is not set

# Timer frequency (100Hz is sufficient for most embedded)
CONFIG_HZ_100=y
# CONFIG_HZ_250 is not set
# CONFIG_HZ_1000 is not set

# Reduce kernel boot parameter parsing
# CONFIG_CMDLINE_BOOL=y
# CONFIG_CMDLINE="console=ttyO0,115200n8 quiet loglevel=0"

# =============================================================================
# KEEP ESSENTIAL FOR BBB
# =============================================================================

# These are REQUIRED for BBB - do not disable
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_8250_OMAP=y
CONFIG_I2C=y
CONFIG_I2C_OMAP=y
CONFIG_SPI=y
CONFIG_SPI_OMAP24XX=y
CONFIG_GPIO_OMAP=y
CONFIG_PINCTRL_SINGLE=y
CONFIG_MMC=y
CONFIG_MMC_OMAP_HS=y
CONFIG_REGULATOR=y
CONFIG_REGULATOR_FIXED_VOLTAGE=y
CONFIG_REGULATOR_TPS65217=y
CONFIG_EXT4_FS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y

# =============================================================================
# BUILD AS MODULES (loads after boot)
# =============================================================================

# Build slow drivers as modules to defer their loading
# CONFIG_USB_GADGET=m
# CONFIG_USB_MUSB_HDRC=m
# CONFIG_USB_ETH=m
# CONFIG_LEDS_GPIO=m
# CONFIG_PWM=m
